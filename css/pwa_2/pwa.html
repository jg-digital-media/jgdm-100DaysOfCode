<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <link rel="stylesheet" type="text/css" href="style.css" />
    <link rel="manifest" href="manifest.json">

    <title>JGDM: Progressive Web App</title>
</head>
<body>

    <header>

        <h1>Progressive Web App</h1>
        <h2>From Jonnie Grieve Digital Media <span id="version">v2</span></h2>

        <nav>
            <ul>
                <li><a href="index.html" title="PWA Homepage">Home</a></li>
                <li><a href="pwa.html" title="About Progressive Web Apps">About PWA's</a></li>
            </ul>
        </nav>
    </header>

    <div class="hidden" id="install">
        <button id="install_btn" type="button">Would you like to install to your device? 
        </button>
        
        <div id="close" onclick="dismiss_btn()">&cross;</div>
            
    </div>

    <main class="container">

        <h1>Projects</h1>

        <main>

            <h2>Manifest.json</h2>

            <code>
                

{
    "name": "JGDM Projects v2",
    "icons": [

    ]

}
            </code>

            <p>Add it to project - <link rel="manifest" href="manifest.json" /></p>

            <h2>Service Worker</h2>

            The service worker can intercept and handle network requests, manage the cache to enable offline support or send push notifications to your users.

            That being said, let's create our very first service worker in the root folder and named it `serviceWorker.js`.

            <h3>Cache assets</h3>

            <code>const staticDevCoffee = "dev-coffee-site-v1"
                const assets = [
                  "/",
                  "/index.html",
                  "/css/style.css",
                  "/js/app.js",
                  "/images/coffee1.jpg",
                  "/images/coffee2.jpg",
                  "/images/coffee3.jpg",
                  "/images/coffee4.jpg",
                  "/images/coffee5.jpg",
                  "/images/coffee6.jpg",
                  "/images/coffee7.jpg",
                  "/images/coffee8.jpg",
                  "/images/coffee9.jpg",
                ]
                
                self.addEventListener("install", installEvent => {
                  installEvent.waitUntil(
                    caches.open(staticDevCoffee).then(cache => {
                      cache.addAll(assets)
                    })
                  )
                })</code>

                self. is the service worker

                <h2>Register the Service Worker</h2>

                <code>if ("serviceWorker" in navigator) {
                    window.addEventListener("load", function() {
                      navigator.serviceWorker
                        .register("/serviceWorker.js")
                        .then(res => console.log("service worker registered"))
                        .catch(err => console.log("service worker not registered", err))
                    })
                  }</code>

        </main>

    </main>

    <footer>
        <p>As built via Tutorial from dev.to: <a href="https://dev.to/ibrahima92/how-to-build-a-pwa-from-scratch-with-html-css-and-javascript-4bg5" target="new">Link</a></p>
    </footer>
    
    <script src="js/app.js"></script>
    
</body>
</html>